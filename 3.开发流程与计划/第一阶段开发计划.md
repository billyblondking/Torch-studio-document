# 说明
在这篇文档中，说明第一阶段，也就是这个学期结束前的开发计划，以及要达到的目标。经过一系列前期的准备工作，本项目于5月20日正式开工，相比预定的5月12日已经晚了一个星期。

# 开发目标
能够实现基本的界面功能，能够在真机上演示一整个关卡。第一阶段的开发对游戏的美术和观感不做过多要求，专注于功能的实现。在这里提醒一下，概念演示图并不能体现出场景的声音效果，请在实现各个场景功能的同时，考虑一下声音效果的实现，例如点击按钮后会有相应的提示音，这些音效归场景自己管理。

# 开发计划
第一阶段的开发计划分两个部分同时进行。

第一部分，从5月20日开始，两周时间，把 Non-Gameplay 的大部分实现完毕。6月2日之后，对接两部分工作，改善界面的观感，完善应该实现的功能和暂缓的功能，测试同步进行。

第二部分，从5月20日开始，两周时间，边设计边验证，给出Gameplay场景的初步实现方案。6月2日之后，专注于第一个关卡的实现上，同时做好和第一部分的对接工作。

开发预计结束于6月11日。

## 5月21日 18:00 之前：

将自己按照 Git 协作指南要求注册的 GitHub 帐号发给张晨，张晨确认并将你加为 collaborator 之后，再使用文档库里面的脚本来搭建本地代码库。

## 5月26日 18:00 之前：

每个人除了完成自己负责的界面功能外，还要在自己所负责的场景（见下文）左上角加一个【返回】（退栈）按钮，点击后能返回 JumpTableScene（请自己做）。将所做的更改 commit 并 push 到 GitHub 上。这么做主要是为了让大家 **熟悉多人 Git 协作** 。

- 张晨：Gameplay 场景的初步设计和实现。

- 朱宏伟：SettingLayer 功能实现，设计弹幕系统。

- 林德道，李天峰：优先完成 HomeScene，一部分完成 EquipScene 和 RoundSelectScene，要求能切换角色装备的道具，符卡以及攻击方式，但不要求实现它们的效果和功能。

- 宛文振：完成InventoryScene，仅仅展示，点击功能先不实现。

- 周海洋，赵一凡：完成 MainMenuScene 和 BackgroundIntroScene，对动态效果不做要求。

- 张晗：完成 SaveScene。

- 董豪：完成 LocationSelectScene。

- 张健淳：维护和更新GameData，完成 LogoAndDisclaimerScene。

在限定时间前 commit，届时会有进度检查。

## 6月2日 18:00 之前：

- 张晨：提交 Gameplay 场景初步实现方案的 **文档**，和代码示例。

- 林德道，李天峰：完成上一周尚未完成的场景。在HomeScene的基础上，完成 ArmsStoreScene 和 KourindouScene（香霖堂）的外部场景界面，不用实现购买界面。

- 宛文振：在InventoryScene的基础上，完成 ArmsStoreScene 和 KourindouScene（香霖堂）的购买界面，实现物品的购买功能，最好实现栏位解锁功能。

- 周海洋，赵一凡：完成上一周尚未完成的场景。

- 董豪：完成上一周尚未完成的场景。

- 张晗：完成上一周尚未完成的场景。

- 朱宏伟：提交 弹幕系统 初步设计方案。

- 张健淳：负责代码合并工作。

在限定时间前 commit，届时会有进度检查。

## 6月12日之前：

分成两部分，

技术组人员：关卡的设计和实现，拿出完整的可演示的第一关，流程长度在4分钟左右。包含部分道具的功能，简单的敌人，以及一个凑数的用来结束关卡的关底BOSS。符卡，复杂的弹幕，场景中的各种元素例如隐藏地点，宝箱之类的暂不在第一阶段实现。

其他人员：负责完成 Non-Gameplay 的完善和测试工作，尽可能地实现预定的功能。最重要的是提升界面的观感。

6月12日整合，收工，第一阶段结束。

## 暂缓实现：

设定数据：关于数据，还有一个庞大的文件组织和存储的系统没有设计。游戏所需的数据暂存在 Touhou-Game\Resources\gamedata 目录下的json文件中。需要新数据的时候请告知 张健淳 ，由他来更新这些数据文件。

## 暂不实现：

KnowledgeBaseScene：资料库不在第一阶段实现。

KoumakanLibraryScene：由于道具系统尚未设计完善，图书馆的托管系统暂不考虑实现。

StaffScene：职员表，等最后的最后验收的时候再考虑制作。

ConversationLayer：对话层暂不考虑实现。一方面没有什么时间设计对话内容，另一方面，对话系统需要实现较多的功能，设计比较复杂。

## 关于观感

概念图中大量使用了Visio自带的图形。如果需要使用这些图形，可以考虑从Visio中提取，使用图片，但更推荐使用PlaceHolder占位符。绘制占位符的函数返回的是一个sprite，可以据此进行更加灵活的操作。

# Git 的使用参考：

## 本地做了更改，要推到远程/拉取远程更改（保证已经 clang-foramt）
- git add the-file-you-change
- git commit # 将本地更改做成 commit
- git fetch origin # 拉取远程到本地（此时尚未合并）
- git rebase origin/master # 合并本地与远程
- git push origin master:master # 将本地 master 分支推到远程
**每执行一条命令，注意看 git 给出的输出，如果一直没有错误，那么就完成了。如果有错误，贴图出来大家一起讨论**

## 本地没有做更改，要拉取远程更改
- git fetch origin # 拉取远程到本地（此时尚未合并）
- git rebase origin/master # 合并本地与远程